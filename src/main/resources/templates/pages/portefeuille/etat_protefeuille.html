<!DOCTYPE html>
<html lang="fr" th:replace="~{_layout :: layout(~{::title}, ~{::body}, ~{::styles}, _)}" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Etat du portefeuille</title>
    <style th:fragment="styles">
        :root {
            --primary-bg: #1a1f2c;
            --secondary-bg: #2d3748;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-primary: #ffffff;
            --text-secondary: #a0aec0;
            --accent-gradient: linear-gradient(90deg, #00f2fe 0%, #4facfe 100%);
            --input-bg: rgba(45, 55, 72, 0.5);
            --border-color: rgba(255, 255, 255, 0.1);
            --profit-color: #10B981;
            --loss-color: #EF4444;
        }

        body {
            background-color: #0f172a;
            color: var(--text-primary);
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        h1 {
            margin-bottom: 2rem;
            font-size: 1.8rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .history-card {
            background: linear-gradient(135deg, var(--primary-bg), var(--secondary-bg));
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 0;
            color: var(--text-primary);
        }

        th {
            background: var(--input-bg);
            color: var(--text-secondary);
            font-weight: 500;
            text-align: left;
            padding: 1rem;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 2px solid var(--border-color);
            position: sticky;
            top: 0;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.95rem;
        }

        tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }

        .crypto-name {
            font-weight: 600;
            color: #4facfe;
        }

        .date {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .quantity {
            font-family: 'Courier New', monospace;
            font-size: 0.925rem;
        }

        .price {
            font-family: 'Courier New', monospace;
            font-weight: 500;
        }

        .variation-positive {
            color: var(--profit-color);
        }

        .variation-negative {
            color: var(--loss-color);
        }

        .profit {
            color: var(--profit-color);
            font-weight: 600;
        }

        .loss {
            color: var(--loss-color);
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .history-card {
                padding: 1rem;
                margin: 0 -1rem;
                border-radius: 0;
            }

            table {
                font-size: 0.875rem;
            }

            th, td {
                padding: 0.75rem 0.5rem;
            }

            th {
                white-space: nowrap;
            }
        }
    </style>
</head>
<div class="container" th:fragment="body">
    <div class="history-card">
        <h1>État du portefeuille</h1>
        <table>
            <thead>
            <tr>
                <th>Crypto</th>
                <th>Date d'achat</th>
                <th>Quantité</th>
                <th>Cours d'achat</th>
                <th>Cours actuel</th>
                <th>Variation</th>
                <th>Valeur Actuelle</th>
                <th>Profit/Perte</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="etat : ${etatPortefeuilles}">
                <td class="crypto-name" th:text="${etat.cryptomonnaie.designation}"></td>
                <td class="date" th:text="${#temporals.format(etat.dateAction, 'dd/MM/yyyy')}"></td>
                <td class="quantity" th:text="${#numbers.formatDecimal(etat.quantite, 1, 8)}"></td>
                <td class="price" th:text="${#numbers.formatDecimal(etat.prixAchatU, 1, 2) + ' €'}"></td>
                <td class="price" th:text="${#numbers.formatDecimal(etat.prixActuel, 1, 2) + ' €'}"></td>
                <td th:class="${etat.variation >= 0 ? 'variation-positive' : 'variation-negative'}"
                    th:text="${#numbers.formatDecimal(etat.variation, 1, 2) + ' %'}"></td>
                <td class="price" th:text="${#numbers.formatDecimal(etat.valeurActuelle, 1, 2) + ' €'}"></td>
                <td th:class="price"
                    th:text="${#numbers.formatDecimal(etat.profitOuPerte, 1, 2) + ' €'}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</html>